(()=>{var o=class{constructor(){this.store=[];this.signal={};this.data={}}on(i,t){typeof t=="function"&&(this.signal[i]||(this.signal[i]=[]),this.signal[i].push(t))}off(i){if(typeof i!="function")return;let t=this.signal;Object.keys(t).forEach(s=>{this.signal[s]=t[s].filter(n=>n!==i)})}emit(i,t){(this.signal[i]||[]).forEach(n=>{n.call(null,t)})}update(i,t){let s=this.data||{};t.timestamp=new Date().getTime(),Object.keys(t).forEach(n=>{let r=t[n];this.isDefined(r)&&(s[n]=r)}),this.store.push({name:i,data:t}),this.data=s,this.emit(i,t)}snapshot(){return this.data}clear(){this.data={},this.store=[]}isDefined(i){return!(typeof i=="undefined"||i==="undefined"||i===null||i==="")}};window&&(window.yoki=new o);})();
