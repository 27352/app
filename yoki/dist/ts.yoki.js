(()=>{var s=class{constructor(){this.store=[];this.signal={};this.data={}}on(i,t){typeof t=="function"&&(this.signal[i]||(this.signal[i]=[]),this.signal[i].push(t))}emit(i,t){(this.signal[i]||[]).forEach(o=>{o.call(null,t)})}update(i,t){t.eventName=i,t.timestamp=new Date().getTime(),Object.keys(t).forEach(n=>{let o=t[n];this.isDefined(o)&&(this.data[n]=o)}),this.store.push(t),this.emit("update",t),this.emit(i,t)}snapshot(){return this.data}clear(){this.data={},this.store=[]}isDefined(i){return!(typeof i=="undefined"||i==="undefined"||i===null||i==="")}};window&&(window.yoki=new s);})();
